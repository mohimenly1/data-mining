العنوان: توثيق دراسة استخراج الأنماط وتأثير التجميع على قواعد الارتباط في بيانات طلاب المرحلة الثانوية

1) الهدف العام للدراسة
   - تحليل بيانات الطلاب لاكتشاف العوامل المؤثرة على النجاح والرسوب.
   - مقارنة جودة الأنماط المستخرجة بقواعد الارتباط قبل وبعد تطبيق تقنية التجميع K-Means.

2) مصادر البيانات
   - الملف: high_school.csv (عدد السجلات: 114240).
   - الحقول الرئيسة: العمر (سنة الميلاد)، المدينة، الجنس، النظام الدراسي، سنة التسجيل، مؤشر النجاح/الرسوب، التخصص، نسبة النجاح في الثانوية.

3) مرحلة المعالجة المسبقة (Data Pre-processing)
   - إزالة التكرارات لتجنب تضخيم وزن الطلاب المكررين.
   - توحيد أسماء الأعمدة وإعادة تنسيق القيم النصية (إزالة الفراغات واستبدالها بشرطات سفلية).
   - التعامل مع البيانات المفقودة:
        * تعويض السنة الأكاديمية المفقودة بـ "Unknown".
        * ضمان أن الأعمدة الرقمية (سنة الميلاد، سنة التسجيل، نسبة النجاح) مصنفة كقيم رقمية صحيحة.
   - إنشاء خصائص اشتقاقية لتسهيل استخراج الأنماط:
        * birth_bucket: شرائح لسنة الميلاد (<=1989، 1990-1992، 1993-1995، >=1996).
        * registration_bucket: شرائح لسنة التسجيل (<=2010، 2011-2012، 2013-2014، >=2015).
        * success_rate_band: شرائح لنسبة النجاح (<70، 70-79، 80-89، 90-100).
   - تصدير نسخة موسومة من البيانات مرفقة بمعرّف المجموعات بعد التجميع: outputs/students_with_clusters.csv.

4) استخراج قواعد الارتباط قبل التجميع (Apriori Before Clustering)
   - الترميز: تحويل كل خاصية إلى معاملات على شكل (اسم الحقل=القيمة) باستخدام الترميز الثنائي One-Hot.
   - المعايير المطبقة:
        * الحد الأدنى للدعم (Support): 0.05.
        * الحد الأدنى للثقة (Confidence): 0.60.
        * أقصى عدد للقواعد المعروضة: 30.
   - النتائج:
        * عدد المعاملات الناتجة: 114239 طالباً.
        * عدد العناصر (المؤشرات) في مصفوفة الترميز: 78.
        * عدد القواعد المستخلصة: 30 قاعدة محفوظة في outputs/apriori_rules_before.csv.
        * الأنماط الأبرز توضح أن الطلاب المولودين بعد 1996 والمنتمين للنظام المدرسي النظامي ومع نسبة نجاح أقل من 70% غالباً ما يظهر لديهم فشل دراسي مع رمز النجاح "ر".

5) تطبيق K-Means للتجميع (Clustering Phase)
   - التجهيز: ترميز كل الخصائص العددية والنصية الخاصة بالطالب باستخدام الترميز الدلالي ثم القياس المعياري StandardScaler.
   - اختيار عدد المجموعات:
        * تجربة قيم k من 2 إلى 8.
        * استخدام معامل الـ Silhouette لتقييم الجودة.
        * أفضل قيمة k تم اختيارها: 6 (Silhouette Score = 0.168).
        * حفظ درجات التقييم في outputs/kmeans_silhouette_scores.json.
   - تلخيص خصائص كل مجموعة:
        * يوفر الملف outputs/cluster_summary.csv عدد الطلاب، متوسط نسبة النجاح، ونسبة النجاح (Successful) في كل عنقود.

6) استخراج قواعد الارتباط بعد التجميع (Apriori After Clustering)
   - لكل عنقود، يتم تشغيل Apriori بنفس الخصائص السابقة مع تكييف الحد الأدنى للدعم تلقائياً: max(0.02, 50 / حجم العنقود).
   - الحد الأدنى للثقة ثابت عند 0.60، وأقصى عدد للقواعد لكل عنقود 20.
   - دمج النتائج في ملف واحد: outputs/apriori_rules_after_clusters.csv (يحتوي على 100 قاعدة).
   - التحسين الملحوظ:
        * القواعد أصبحت أكثر تحديداً ووضوحاً لكل شريحة طلابية.
        * مثال: في أحد العناقيد، يظهر ارتباط قوي بين الطالبات من مدينة طرابلس (مع نظام ثانوي متخصص) ونسبة réussite عالية تؤدي إلى النجاح، وهو نمط لم يظهر بنفس القوة في التحليل العام قبل التجميع.

7) مقارنة النتائج قبل وبعد K-Means
   - قبل التجميع: القواعد تمثل الاتجاهات العامة وتشمل نتائج متباينة بسبب وجود ضجيج (Noise) وتداخل شرائح الطلاب.
   - بعد التجميع: تم كشف أنماط دقيقة داخل كل مجموعة، مثل تركّز حالات الفشل في عنقود محدد يجمع خصائص معينة (مثلاً سنة ميلاد حديثة وتسجيل متأخر)، وظهور أنماط نجاح مرتبطة بمدن أو تخصصات معينة في عناقيد أخرى.
   - الاستنتاج العلمي: تطبيق K-Means قلل من الضجيج وسمح باستخراج قواعد أكثر دلالة لكل فئة، ما يعزز قدرة الإدارة التعليمية على وضع تدخلات مخصصة.

8) الخلاصة النهائية والتوصيات
   - النتيجة الرئيسة: الجمع بين K-Means وApriori زاد من وضوح العلاقات مقارنة بالتطبيق المباشر لقواعد الارتباط على كامل البيانات.
   - توصيات عملية:
        * التركيز على العناقيد ذات معدلات الفشل المرتفعة لمعالجة الأسباب (مثل تحسين الدعم للطلاب الذين ينتمون للنظام النظامي وسجلوا بعد 2015).
        * الاستفادة من أنماط النجاح في العناقيد الأخرى لتعميم أفضل الممارسات (على سبيل المثال دعم تخصصات ومدن تحقق نجاحاً عالياً).
        * تحديث البيانات دورياً وإعادة تشغيل التحليل لمتابعة التغيرات في أنماط النجاح والفشل.

9) كيفية إعادة تنفيذ الدراسة
   - تأكد من تثبيت المتطلبات: pandas، scikit-learn، mlxtend.
   - شغّل الملف البرمجي: python analysis_pipeline.py.
   - ستُحفظ جميع المخرجات المحدثة في مجلد outputs.

10) الملفات المرجعية للمخرجات
   - outputs/summary.txt: ملخص سريع للنتائج بالأرقام الرئيسة.
   - outputs/apriori_rules_before.csv: القواعد قبل التجميع.
   - outputs/apriori_rules_after_clusters.csv: القواعد بعد التجميع لكل عنقود.
   - outputs/cluster_summary.csv: إحصائيات العناقيد.
   - outputs/students_with_clusters.csv: بيانات الطلاب مرفقة بالعنقود المنتمي إليه كل طالب.
   - outputs/kmeans_silhouette_scores.json: درجات تقييم k قبل اختيار الأفضل.

